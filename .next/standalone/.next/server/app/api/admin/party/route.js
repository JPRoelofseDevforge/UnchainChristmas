"use strict";(()=>{var e={};e.id=731,e.ids=[731],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},2171:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>j,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var a={};t.r(a),t.d(a,{DELETE:()=>y,GET:()=>l,POST:()=>c,PUT:()=>w});var s=t(9303),n=t(8716),i=t(670),o=t(7070),p=t(728),d=t(2023),u=t.n(d);async function c(e){try{let{email:r,password:t,name:a,date:s,location:n,description:i}=await e.json(),d=await p._.adminUser.findUnique({where:{email:r}});if(!d||!await u().compare(t,d.password))return o.NextResponse.json({error:"Invalid credentials"},{status:401});let c=await p._.party.create({data:{name:a,date:new Date(s),location:n,description:i}});return o.NextResponse.json({success:!0,party:c})}catch(e){return console.error("Error creating party:",e),o.NextResponse.json({error:"Failed to create party"},{status:500})}}async function l(){try{let e=await p._.party.findMany({include:{children:{include:{wishlist:!0,pledges:!0}}},orderBy:{date:"desc"}});return o.NextResponse.json(e)}catch(e){return console.error("Error fetching parties:",e),o.NextResponse.json({error:"Failed to fetch parties"},{status:500})}}async function w(e){try{let{email:r,password:t,id:a,name:s,date:n,location:i,description:d}=await e.json(),c=await p._.adminUser.findUnique({where:{email:r}});if(!c||!await u().compare(t,c.password))return o.NextResponse.json({error:"Invalid credentials"},{status:401});let l=await p._.party.update({where:{id:parseInt(a)},data:{name:s,date:new Date(n),location:i,description:d}});return o.NextResponse.json({success:!0,party:l})}catch(e){return console.error("Error updating party:",e),o.NextResponse.json({error:"Failed to update party"},{status:500})}}async function y(e){try{let{searchParams:r}=new URL(e.url),t=r.get("id"),a=r.get("email"),s=r.get("password"),n=await p._.adminUser.findUnique({where:{email:a}});if(!n||!await u().compare(s,n.password))return o.NextResponse.json({error:"Invalid credentials"},{status:401});return await p._.party.delete({where:{id:parseInt(t)}}),o.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting party:",e),o.NextResponse.json({error:"Failed to delete party"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/party/route",pathname:"/api/admin/party",filename:"route",bundlePath:"app/api/admin/party/route"},resolvedPagePath:"c:\\Work\\UnchainChristmas\\src\\app\\api\\admin\\party\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:f}=m,g="/api/admin/party/route";function j(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},728:(e,r,t)=>{t.d(r,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma??new a.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,972,23],()=>t(2171));module.exports=a})();